  @import url(https://fonts.googleapis.com/css?family=Droid+Serif:400,400italic,700,700italic);
@import url(https://fonts.googleapis.com/css?family=Droid+Sans:400,400italic,700,700italic);

::-moz-focus-inner {border:0;}

html{
  overflow-y: scroll; 
}


body,html{
  margin:0;
  padding:0;
  font-family: 'Droid Serif', serif;
  height: 100%;
}

a, input{
  outline: none;
}

a, button{
  cursor: pointer;
}

.interject{
  font-size: smaller;
  font-style: italic;
  font-variant: normal;
  font-weight: 400;
}


body::after, body::before{
  content : "";
  display: block;
  position: fixed;
  top: -30px;
  left: -30px;
  right: -30px;
  bottom: -30px;
  z-index: -1;
  transition: opacity .2s;
}

body::before{
  background-image: url(/images/landing_bg.jpg);
  background-size: cover;
  background-position: center;
  opacity: 0;
}

body::after{
  background-image: url(/images/landing_bg_blur.jpg);
  background-size: cover;
  background-position: center;
  transition: opacity .2s;
  opacity: .7;
}

body.main-page::after{
  opacity: 0;
}

body.main-page::before{
  opacity: .7;
}


$pane-spacing: 15px;

@import "globals/info_table";
@import "globals/_buttons";
@import "globals/forms";
@import "partials/header";

main{
  #search{
    overflow: hidden;
    box-shadow: 0px 3px 10px 2px rgba(0,0,0,.3);
    z-index: 10;
    position: relative;
    box-sizing: border-box;
    background-color:white;
    text-align: center;
    width: 500px;
    margin: 0 auto;
    transition: width .3s;

    #search-form{
      margin:30px;
      transition: margin .2s;
      #search-labels{
        display: inline-block;
        position: relative;
        text-align: right;

        label{
          font-size: 18px;
          display: inline-block;
          font-style: normal;
          transition: opacity .2s,
                      width .2s;
        }
        
        label.pre-search{
          opacity:1;
          width: 250px;
          overflow: hidden;
          white-space: nowrap;
        }

        label.post-search{
          opacity:0;
          position:absolute;
          right:0;
        }
      }

      #search-box{
        text-align: center;
        vertical-align: top;
        font-size: 18px;
        $init-search-width: 70px;
        width: $init-search-width;
        min-width:$init-search-width;
        max-width:300px;
        margin: 0 20px;
        text-overflow: ellipsis;
        transition: width .2s;
      }
    }
    
    #search-results{
      overflow: hidden;
      transition: height .2s;
    }
    
    #search-results.minimized{
      //TODO: in dire need of transition.
      height: 0;
    }

    #search-results ul{
      list-style-type: none;
      padding: 0;
      li{
        box-shadow: 0px 1px 6px 0px rgba(0,0,0,.15);
        width: 490px;
        margin:0 auto 30px auto;
        transition: box-shadow .1s;
        div.preview{
          padding: 20px;
          img {
            width:125px;
          }
        }
        div.info{
          flex-grow: 1;
          padding-right: 20px;
          padding-bottom: 20px;
        }
        a.book{
          text-decoration: none;
          color:black;
          text-align: left;
          display: flex;
        }
        h4{
          font-family: 'Droid Sans', serif;
          margin-bottom: 0;
          font-weight: bold;
          color:black;
        }
        h5{
          font-family: 'Droid Sans', serif;
          font-weight: 400;
          margin-top:0;
          padding-bottom: 6px;
          border-bottom: 2px solid black;
        }
        table{
          width: 100%;
        }
      }
      li:hover{
        box-shadow: 0px 1px 10px 0px rgba(0, 0, 0, .3) ;
      }
    }
  }

  #search.home-view{
    width: 500px;
  }
  
  #search.searching, #search.behind-detail{
    width: 530px;

    #search-form{
      #search-labels{
        label.pre-search{
          opacity:0;
          width: 100px;
        }

        label.post-search{
          opacity:1;
        }
      }
    }
  }

  #search.behind-detail{
    #search-form{
      margin:15px;
    }
    // #search-results{
    //   //TODO: in dire need of transition.
    //   height: 0;
    // }
  }

  @keyframes spin {
    0% {
      transform: rotate(0deg);
    }
    100% {
      transform: rotate(360deg);
    }
  }

  .loading{
    display: inline-block;
    border-radius: 50%;
    width: 16px;
    height: 16px;
    border: 0.25rem solid black;
    border-top-color: white;
    border-bottom-color: white;
    border-top-width: .15em;
    border-bottom-width: .15em;
    animation: spin 1s infinite linear;
    opacity: 0;
    transition: opacity .2s;
  }

  .loading.visible{
    opacity: 1;
  }

  #detail-wrapper{
    width:500px;
    margin: -10px auto 40px auto;
    padding-bottom: 20px;
    position: relative;
    z-index: 20;
    overflow: hidden;
    transition: opacity .2s;

    .detail-nav {
      font-size: 24pt;
      position: fixed;
      top: calc(50vh - 32px);
      width:64px;
      color: rgba(0,0,0,.5);
      font-size: 64px;
      transition: color .2s;
    }

    .detail-nav:hover{
      text-shadow: 0px 1px 5px rgba(0,0,0,.3);
    }

    #detail{
      margin: 10px auto 0 auto;
      padding:20px;
      box-sizing: border-box;
      background-color:white;
      position: relative;
    }
  }

  #detail-wrapper.minimized{
    opacity:0;
    #detail{
      box-shadow: 0px 3px 10px 2px rgba(0,0,0,0);
    }

    .detail-nav{
      color: rgba(0,0,0,0);
    }
    height:0;
    margin-bottom: 0;
  }
  #detail-wrapper.maximized{
    width:750px;
    max-width: 100vw;
    overflow: visible;
    #detail{
      width:570px;
      box-shadow: 0px 3px 10px 2px rgba(0,0,0,.3);
    }
    opacity: 1;
    height:auto;
  }
}

@import "partials/details";
@import "partials/modals";
